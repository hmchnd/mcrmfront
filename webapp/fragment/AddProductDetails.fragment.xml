<core:FragmentDefinition xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    <ObjectPageLayout id="ProductObjectPageLayout" showTitleInHeaderContent="true" alwaysShowContentHeader="false" preserveHeaderStateOnScroll="false" headerContentPinnable="true" isChildPage="true" upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <expandedHeading>
                    <m:Title text="{AppState>/oSelectedServiceObject/id}" wrapping="true" visible="false" />
                </expandedHeading>
                <actions>
                    <m:Button id="saveClientDetails" text="Save" icon="sap-icon://save" type="Critical" press="onSaveProductDetails" />

                    <m:Button icon="sap-icon://decline" type="Critical" press="onCloseDetailPage" />
                    <m:Button id="deleteServices" icon="sap-icon://delete" type="Critical" press="onDeleteServices" />
                </actions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Stretch" />
        </headerContent>

        <sections>
            <ObjectPageSection title="Services Details">
                <subSections>
                    <ObjectPageSubSection>
                        <blocks>
                           <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <form:content>
                                    <m:Label text="Service Name" required="true"/>
                                    <m:Input value="{AppState>/oSelectedServiceObject/name}" maxLength="100"/>
                                    
                                    <m:Label text="Category" required="true"/>
                                    <m:ComboBox
                                        selectedKey="{AppState>/oSelectedServiceObject/categoryid}"
                                        items="{
                                            path: 'AppState>/categories',
                                            sorter: { path: 'name' }
                                        }">
                                        <core:Item key="{AppState>id}" text="{AppState>name}"/>
                                    </m:ComboBox>
                                    
                                    <m:Label text="Description"/>
                                    <m:TextArea value="{AppState>/oSelectedServiceObject/description}" rows="3" growing="true"/>
                                </form:content>
                            </form:SimpleForm>

                        </blocks>
                    </ObjectPageSubSection>

 <ObjectPageSubSection>
                        <blocks>
                        <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <form:content>
                                    <m:Label text="Rate Type" required="true"/>
                                    <m:Select
                                        selectedKey="{AppState>/oSelectedServiceObject/rate_type}"
                                        forceSelection="false">
                                        <core:Item key="hourly" text="Hourly"/>
                                        <core:Item key="daily" text="Daily"/>
                                        <core:Item key="project" text="Project-based"/>
                                        <core:Item key="retainer" text="Retainer"/>
                                        <core:Item key="unit" text="Per Unit"/>
                                    </m:Select>
                                    
                                    <m:Label text="Rate" required="true"/>
                                    <m:HBox>
                                        <m:Input 
                                            value="{AppState>/oSelectedServiceObject/rate}" 
                                            type="Number"
                                            width="10rem"
                                            class="sapUiSmallMarginEnd"/>
                                        <m:ComboBox
                                            selectedKey="{AppState>/oSelectedServiceObject/currency}"
                                           
                                            width="8rem">
                                            <core:Item key="USD" text="USD"/>
                                             <core:Item key="INR" text="INR"/>
                                              <core:Item key="EURO" text="EURO"/>
                                        </m:ComboBox>
                                    </m:HBox>
                                    
                                    <m:Label 
                                        text="{= ${AppState>/oSelectedServiceObject/rate_type} === 'project' ? 'Estimated Hours' : 'Minimum Hours' }"
                                        visible="{= ${AppState>/oSelectedServiceObject/rate_type} === 'project' || ${AppState>/oSelectedServiceObject/rate_type} === 'hourly' }"/>
                                    <m:StepInput
                                        value="{AppState>/oSelectedServiceObject/estimated_hours}"
                                        min="1"
                                        max="1000"
                                        step="1"
                                        width="10rem"
                                        visible="{= ${AppState>/oSelectedServiceObject/rate_type} === 'project' || ${AppState>/oSelectedServiceObject/rate_type} === 'hourly' }"/>
                                </form:content>
                            </form:SimpleForm>
                        </blocks>
                    </ObjectPageSubSection>

                     <ObjectPageSubSection>
                        <blocks>
                           <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <form:content>
                                    <m:Label text="Active Status"/>
                                    <m:Switch 
                                        state="{AppState>/oSelectedServiceObject/is_active}"
                                        customTextOn="Active"
                                        customTextOff="Inactive"/>
                                    
                                    <m:Label text="Lead Time" tooltip="Time required before starting this service"/>
                                    <m:Input 
                                        value="{AppState>/oSelectedServiceObject/lead_time}"
                                        placeholder="e.g., 2 weeks, 3 days"
                                        width="12rem"/>
                                </form:content>
                            </form:SimpleForm>
                        </blocks>
                    </ObjectPageSubSection>


                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</core:FragmentDefinition>