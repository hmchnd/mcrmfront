<mvc:View
	height="100%"
	controllerName="micro.crm.frontend.controller.ManageLeads"
	xmlns:mvc="sap.ui.core.mvc"
	 xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:l="sap.ui.layout"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:core="sap.ui.core">

	<Page showHeader="false" enableScrolling="true" class="sapUiContentPadding"
		showNavButton="false">

		 <content>
            <f:FlexibleColumnLayout layout="{productLayoutViewLeadView>/layout}">
                <f:beginColumnPages>
                    <Page showHeader="false">
                        <content>
                            
                        
            <l:VerticalLayout class="sapUiContentPadding equalColumns" width="100%">
                <FlexBox class="columns">
                    
                    <!-- New Leads Column -->
                    <VBox class="sapUiSmallMargin">
                        <ObjectStatus 
                            state="Error" 
                            text="New Leads" 
                            class="sapUiSmallMarginBottom"/>
                        <f:GridContainer
                            id="newLeadsContainer"
                            width="100%"
                            snapToRow="true"
                            items="{
                                path: 'AppState>/Leads',
                                filters: [{ path: 'status', operator: 'EQ', value1: 'New' }]
                               
                            }">
                            <f:layout>
                                <f:GridContainerSettings
                                    rowSize="10px"
                                    columnSize="400px"
                                    gap="20px"
                                    class="sapUiSmallMargin"/>
                            </f:layout>
                            <f:Card class="sapUiTinyMargin" press="onLeadPress">
                                <f:header>
                                    <card:Header
                                        title="{AppState>name}"
                                        subtitle="{AppState>source}"
                                        statusText="{AppState>priority}"
                                        iconSrc="sap-icon://leads"/>
                                </f:header>
                                <f:content>
                                    <VBox width="20rem" class="sapUiTinyMargin">
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Contact:"/>
                                            <Text text="{AppState>phone} / {AppState>email}"/>
                                        </HBox>
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Budget:"/>
                                            <ObjectNumber
                                                number="{AppState>budget}"
                                                unit="{AppState>currency}"/>
                                        </HBox>
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Last Contact:"/>
                                            <Text text="{
                                                path: 'AppState>last_contacted'
                                            }"/>
                                        </HBox>
                                        
                                    </VBox>
                                </f:content>
                            </f:Card>
                        </f:GridContainer>
                    </VBox>
                    
                    <!-- Contacted/Qualified Column -->
                    <VBox class="sapUiSmallMargin">
                        <ObjectStatus 
                            state="Warning" 
                            text="In Progress" 
                            class="sapUiSmallMarginBottom"/>
                        <f:GridContainer
                            id="activeLeadsContainer"
                            width="100%"
                            snapToRow="true"
                            items="{
                                path: 'AppState>/Leads',
                                filters: [
                                    { path: 'status', operator: 'EQ', value1: 'Contacted' },
                                    { path: 'status', operator: 'EQ', value1: 'Qualified' }
                                ]
                            }">
                            <f:layout>
                                <f:GridContainerSettings
                                    rowSize="10px"
                                    columnSize="400px"
                                    gap="20px"
                                    class="sapUiSmallMargin"/>
                            </f:layout>
                            <f:Card class="sapUiTinyMargin" press="onLeadPress">
                                <f:header>
                                    <card:Header
                                        title="{AppState>name}"
                                        subtitle="{AppState>source}"
                                        statusText="{AppState>priority}"
                                        iconSrc="sap-icon://opportunity"/>
                                </f:header>
                                <f:content>
                                    <VBox width="20rem" class="sapUiTinyMargin">
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Next Follow-up:"/>
                                            <Text text="{
                                                path: 'AppState>next_followup'
                                            }"/>
                                        </HBox>
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Budget:"/>
                                            <ObjectNumber
                                                number="{AppState>budget}"
                                                unit="{AppState>currency}"/>
                                        </HBox>
                                        <HBox>
                                            <core:Icon src="sap-icon://tag" class="sapUiTinyMarginEnd"/>
                                            <Text text="{= ${AppState>tags} ? ${AppState>tags}.join(', ') : 'No tags'}"/>
                                        </HBox>
                                        
                                    </VBox>
                                </f:content>
                            </f:Card>
                        </f:GridContainer>
                    </VBox>
                    
                    <!-- Proposal/Negotiation Column -->
                    <VBox class="sapUiSmallMargin">
                        <ObjectStatus 
                            state="Information" 
                            text="Hot Leads" 
                            class="sapUiSmallMarginBottom"/>
                        <f:GridContainer
                            id="hotLeadsContainer"
                            width="100%"
                            snapToRow="true"
                            items="{
                                path: 'AppState>/Leads',
                                filters: [
                                    { path: 'status', operator: 'EQ', value1: 'Proposal' },
                                    { path: 'status', operator: 'EQ', value1: 'Negotiation' }
                                ]
                            }">
                            <f:layout>
                                <f:GridContainerSettings
                                    rowSize="10px"
                                    columnSize="400px"
                                    gap="20px"
                                    class="sapUiSmallMargin"/>
                            </f:layout>
                            <f:Card class="sapUiTinyMargin" press="onLeadPress">
                                <f:header>
                                    <card:Header
                                        title="{AppState>name}"
                                        subtitle="{AppState>source}"
                                        statusText="{AppState>priority}"
                                        iconSrc="sap-icon://money-bills"/>
                                </f:header>
                                <f:content>
                                    <VBox width="20rem" class="sapUiTinyMargin">
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Budget:"/>
                                            <ObjectNumber
                                                number="{AppState>budget}"
                                                unit="{AppState>currency}"
                                                state="Success"/>
                                        </HBox>
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Last Contact:"/>
                                            <Text text="{
                                                path: 'AppState>last_contacted'
                                            }"/>
                                        </HBox>
                                        <Text text="Notes: {AppState>notes}" wrapping="true"/>
                                      
                                    </VBox>
                                </f:content>
                            </f:Card>
                        </f:GridContainer>
                    </VBox>
                    
                    <!-- Closed Column -->
                    <VBox class="sapUiSmallMargin">
                        <ObjectStatus 
                            state="Success" 
                            text="Closed" 
                            class="sapUiSmallMarginBottom"/>
                        <f:GridContainer
                            id="closedLeadsContainer"
                            width="100%"
                            snapToRow="true"
                            items="{
                                path: 'AppState>/Leads',
                                filters: [
                                    { path: 'status', operator: 'EQ', value1: 'Closed-Won' },
                                    { path: 'status', operator: 'EQ', value1: 'Closed-Lost' }
                                ]
                            }">
                            <f:layout>
                                <f:GridContainerSettings
                                    rowSize="10px"
                                    columnSize="400px"
                                    gap="20px"
                                    class="sapUiSmallMargin"/>
                            </f:layout>
                            <f:Card class="sapUiTinyMargin" press="onLeadPress">
                                <f:header>
                                    <card:Header
                                        title="{AppState>name}"
                                        subtitle="{AppState>source}"
                                        statusText="{AppState>status}"
                                        iconSrc="{
                                            path: 'AppState>status'
                                          
                                        }"/>
                                </f:header>
                                <f:content>
                                    <VBox width="20rem" class="sapUiTinyMargin">
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Final Budget:"/>
                                            <ObjectNumber
                                                number="{AppState>budget}"
                                                unit="{AppState>currency}"
                                                state="{
                                                    path: 'AppState>status'
                                                  
                                                }"/>
                                        </HBox>
                                        <HBox justifyContent="SpaceBetween">
                                            <Text text="Closed Date:"/>
                                            <Text text="{
                                                path: 'AppState>modifiedat'
                                            }"/>
                                        </HBox>
                                        <Text text="Notes: {AppState>notes}" wrapping="true"/>
                                       
                                    </VBox>
                                </f:content>
                            </f:Card>
                        </f:GridContainer>
                    </VBox>
                    
                </FlexBox>
            </l:VerticalLayout>
        </content>
        

                           
                      
                    </Page>
                </f:beginColumnPages>

                <f:midColumnPages>
                    <core:Fragment
                        fragmentName="micro.crm.frontend.fragment.AddLeadDetails"
                        type="XML"
                    />
                </f:midColumnPages>

                <f:endColumnPages />
            </f:FlexibleColumnLayout>
        </content>
	</Page>
</mvc:View>
